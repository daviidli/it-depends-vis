(this["webpackJsonpit-depends-vis"]=this["webpackJsonpit-depends-vis"]||[]).push([[0],{14:function(t){t.exports=JSON.parse('{"SET_REPO":"SET_REPO","SET_DATA":"SET_DATA","SET_COMMITS":"SET_COMMITS","SET_START_COMMIT":"SET_START_COMMIT","SET_END_COMMIT":"SET_END_COMMIT","SET_TOP_COUNT":"SET_TOP_COUNT","SET_ORDERING":"SET_ORDERING"}')},287:function(t,e,n){t.exports=n(513)},322:function(t,e,n){},323:function(t,e,n){},381:function(t,e,n){},385:function(t,e,n){},401:function(t,e,n){},402:function(t,e,n){},48:function(t){t.exports=JSON.parse('{"HOME":"/","LOADING":"/loading","VIS":"/vis"}')},497:function(t,e,n){},510:function(t,e,n){var a={"./example.png":511};function r(t){var e=i(t);return n(e)}function i(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=i,t.exports=r,r.id=510},511:function(t,e,n){t.exports=n.p+"static/media/example.2648648c.png"},512:function(t,e,n){},513:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),i=n(10),o=n.n(i),c=n(19),s=n(97),l=n(99),u=n.n(l);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var m=n(54),d=n(66),p=n(204),h=n(14),f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;return e.type===h.SET_REPO?e.repo:t},g={names:[],data:[]},v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,e=arguments.length>1?arguments[1]:void 0;return e.type===h.SET_DATA?e.data:t},O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;return e.type===h.SET_COMMITS?e.commits:t},b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return e.type===h.SET_START_COMMIT?e.startCommit:t},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return e.type===h.SET_END_COMMIT?e.endCommit:t},w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,e=arguments.length>1?arguments[1]:void 0;return e.type===h.SET_TOP_COUNT?e.topCount:t},j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"descending",e=arguments.length>1?arguments[1]:void 0;return e.type===h.SET_ORDERING?e.ordering:t},y=function(t){return Object(d.c)({router:Object(s.b)(t),repo:f,data:v,commits:O,startCommit:b,endCommit:E,topCount:w,ordering:j})},C=Object(m.a)(),T=function(t){return Object(d.e)(y(C),t,Object(d.d)(Object(d.a)(Object(p.a)(C)),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(t){return t}))},x=n(27),S=n(68),_=(n(313),function(t){var e=t.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.b,{position:"top-right",autoClose:2500,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!0,pauseOnHover:!0,transition:S.a}),e)});_.defaultProps={children:null};var N=_,D=n(48),M=n(519),k=function(t){return{type:h.SET_REPO,repo:t}},A=function(t){return{type:h.SET_START_COMMIT,startCommit:t}},I=function(t){return{type:h.SET_END_COMMIT,endCommit:t}},z=(n(314),n(243)),R=n(130),P=(n(93),n(28)),V=(n(234),n(57)),U=(n(108),n(31)),H=(n(140),n(76)),L=n(127),G=n(241),B=(n(320),n(265)),F=n(527),W=n(237),J=n(528),X=n(529),q=n(517),$=n(518),K=n(526),Q=n(516),Y=(n(322),Object(F.a)(Object(K.a)("\n"),Q.a)),Z=function(t){var e=t.commit;return r.a.createElement(P.a,{className:"dropdown-item",justify:"center",align:"center",gutter:[16,8]},r.a.createElement(U.a,{span:3},e&&e.author&&e.author.avatar_url?r.a.createElement("img",{className:"avatar",alt:"author avatar",src:e.author.avatar_url}):null),r.a.createElement(U.a,{span:21},Y(e.message)))},tt=(n(323),function(t){var e,n=t.startCommit,a=t.endCommit,i=t.setStartCommit,o=t.setEndCommit,c=t.commits,s=function(t){return r.a.createElement(V.a.Option,{key:t.sha,value:t.sha},r.a.createElement(Z,{commit:t}))},l=function(t,e){return function(n){return t(Object(q.a)(n,Object(J.a)(Object($.a)("sha"))(e)))}};return r.a.createElement(P.a,{className:"dropdown-panel"},r.a.createElement(U.a,{span:24,className:"dropdown-col"},r.a.createElement("div",null,"Starting Commit"),r.a.createElement(V.a,{className:"dropdown-select",size:"middle",value:c[n].sha,onSelect:l(i,c)},(e=a,Object(F.a)(Object(W.a)(0,e),Object(J.a)(s)))(c))),r.a.createElement(U.a,{span:24,className:"dropdown-col"},r.a.createElement("div",null,"Ending Commit"),r.a.createElement(V.a,{className:"dropdown-select",size:"middle",value:c[a].sha,onSelect:l(o,c)},function(t){return Object(F.a)(Object(W.a)(t+1,Object(X.a)(c)),Object(J.a)(s))}(n)(c))))}),et=(n(381),function(t){var e=t.icon,n=t.startCommit,a=t.endCommit,i=t.setStartCommit,o=t.setEndCommit,c=t.commits;return r.a.createElement(B.a,{className:"dropdown",content:r.a.createElement(tt,{startCommit:n,endCommit:a,setStartCommit:i,setEndCommit:o,commits:c}),placement:"bottomRight",trigger:"click"},r.a.createElement("div",{className:"button"},r.a.createElement(H.a,{type:"default",shape:"circle",size:"large",icon:e})))}),nt=Object(M.a)(["startCommit","endCommit","commits"]),at={setStartCommit:A,setEndCommit:I},rt=Object(c.c)(nt,at)(et),it=(n(382),n(258)),ot=(n(385),function(t){var e=t.topCount,n=t.setTopCount;return r.a.createElement(it.a,{className:"slider",min:1,max:200,marks:{1:"1",20:"20",50:"50",100:"100",200:"200"},defaultValue:e,onAfterChange:n})}),ct={setTopCount:function(t){return{type:h.SET_TOP_COUNT,topCount:t}}},st=Object(c.c)((function(t){return{topCount:t.topCount}}),ct)(ot),lt=(n(401),function(t){var e=t.ordering,n=t.setOrdering,a=Object(x.e)(),i=r.a.createElement("div",{className:"button-container",onClick:function(){return a.push(D.HOME)}},r.a.createElement(H.a,{className:"button",type:"primary",shape:"circle",size:"large",icon:r.a.createElement(L.a,{size:32})}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{className:"header",justify:"space-between"},r.a.createElement(U.a,{xs:2},i),r.a.createElement(U.a,{xs:22},r.a.createElement(P.a,{justify:"end"},r.a.createElement(U.a,null,r.a.createElement(V.a,{className:"order-select",value:e,onChange:n},r.a.createElement(V.a.Option,{value:"descending"},"Descending"),r.a.createElement(V.a.Option,{value:"ascending"},"Ascending"),r.a.createElement(V.a.Option,{value:"directory"},"Directory"))),r.a.createElement(U.a,{xs:16,md:10},r.a.createElement(st,null)),r.a.createElement(U.a,{className:"dropdownContainer"},r.a.createElement(rt,{icon:r.a.createElement(G.a,{size:28})}))))))}),ut={setOrdering:function(t){return{type:h.SET_ORDERING,ordering:t}}},mt=Object(c.c)((function(t){return{ordering:t.ordering}}),ut)(lt),dt=n(262),pt=n(242),ht=n(53),ft=n(164),gt=n(264),vt=n(260),Ot=n(16),bt=(n(402),function(t){Object(gt.a)(n,t);var e=Object(vt.a)(n);function n(t){var a;return Object(pt.a)(this,n),(a=e.call(this,t)).margin={top:250,left:250,right:100,bottom:25},a.width=t.width-a.margin.left-a.margin.right,a.height=a.width+a.margin.bottom,a.changeOrder=a.changeOrder.bind(Object(ht.a)(a)),a.updateData=a.updateData.bind(Object(ht.a)(a)),a.appendRow=a.appendRow.bind(Object(ht.a)(a)),a.appendCol=a.appendCol.bind(Object(ht.a)(a)),a.initializeVis=a.initializeVis.bind(Object(ht.a)(a)),a.renderData=a.renderData.bind(Object(ht.a)(a)),a.updateDimensions=a.updateDimensions.bind(Object(ht.a)(a)),a}return Object(ft.a)(n,null,[{key:"getTopMappings",value:function(t,e,n){var a=e.map((function(t,e){return{total:t.reduce((function(t,e){return t+e})),index:e}}));a.sort((function(t,e){return e.total-t.total}));var r=a.slice(0,n).map((function(t){return t.index}));return{topMappings:r.map((function(t){return r.map((function(n){return e[t][n]}))})),topFiles:r.map((function(e){return t[e]}))}}},{key:"formatData",value:function(t,e){return e.map((function(e,n){return e.map((function(e,a){return{row:n,col:a,source:t[n],target:t[a],val:e}}))}))}}]),Object(ft.a)(n,[{key:"componentDidMount",value:function(){this.initializeVis()}},{key:"shouldComponentUpdate",value:function(t){var e=this.props,n=e.ordering,a=e.mappings,r=e.files,i=e.topCount,o=e.width,c=e.height,s=t.ordering,l=t.mappings,u=t.files,m=t.topCount,d=t.width,p=t.height;return o!==d||c!==p||!!u&&(s!==n&&this.changeOrder(s),l===a&&u===r&&m===i||this.renderData(u,l,m,s),!1)}},{key:"componentDidUpdate",value:function(){var t=this.props,e=t.ordering,n=t.mappings,a=t.files,r=t.topCount,i=t.width;Ot.f("#d3-vis").selectAll("g").remove(),Ot.f(".tooltip").remove(),this.updateDimensions(i),this.initializeVis(),this.renderData(a,n,r,e)}},{key:"updateDimensions",value:function(t){this.width=t-this.margin.left-this.margin.right,this.height=this.width+this.margin.bottom}},{key:"initializeVis",value:function(){this.x=Ot.b().range([0,this.width]).padding(.05),this.z=Ot.c().domain([0,1]).clamp(!0),this.svg=Ot.f("#d3-vis").attr("width",this.width+this.margin.left).attr("height",this.height+this.margin.top).append("g").attr("transform","translate(".concat(this.margin.left,", ").concat(this.margin.top,")")),this.tooltip=Ot.f(".vis").append("div").attr("class","tooltip").style("opacity",0),this.svg.append("rect").attr("class","background").attr("width",this.width).attr("height",this.height).style("fill","#fff")}},{key:"appendRow",value:function(t){var e=this,n=this.x,a=this.z,r=this.colors,i=this.tooltip,o=this.margin,c=this.props,s=function(t){Ot.g(".row-label").classed("active",(function(e,n){return n===t.row})),Ot.g(".col-label").classed("active",(function(e,n){return n===t.col})),Ot.g(".cell.row-".concat(t.row,".col-").concat(t.col)).classed("active",!0),i.selectAll("p").remove(),i.style("z-index","1").style("bottom","".concat(c.height-n(t.row)-o.top-80,"px")),n(t.col)<=c.width/2?i.style("right","inherit").style("left","".concat(n(t.col)+o.left,"px")):i.style("left","inherit").style("right","".concat(c.width-n(t.col)-o.left-1.25*n.bandwidth(),"px")),i.transition().duration(300).style("opacity",.9),i.append("p").attr("class","").text("source: ".concat(t.source)),i.append("p").text("target: ".concat(t.target)),i.append("p").text("value: ".concat(Math.round(1e4*t.val)/100,"%"))},l=function(t){Ot.g(".row-label").classed("active",!1),Ot.g(".col-label").classed("active",!1),Ot.g(".cell.row-".concat(t.row,".col-").concat(t.col)).classed("active",!1),i.transition().duration(300).style("opacity",0).style("z-index","-1")},u=function(t){var e=Ot.f(this).selectAll(".cell").data(t);e.exit().remove(),e.enter().append("rect").attr("class",(function(t){return"cell row-".concat(t.row," col-").concat(t.col)})).attr("x",(function(t){return n(t.col)})).attr("width",n.bandwidth()).attr("height",n.bandwidth()).style("fill-opacity",(function(t){return a(t.val)})).style("fill",(function(t){var e=t.source.split("/"),n=t.target.split("/");return 1===e.length&&1===n.length?r(""):e[0]===n[0]?r(e[0]):"#000"})).on("mouseover",s).on("mouseout",l)},m=this.svg.selectAll(".row").data(t);m.exit().remove();var d=m.enter().append("g").attr("class","row").attr("transform",(function(t,n){return"translate(0, ".concat(e.x(n),")")})).each(u);d.append("line").attr("x2",this.width),d.append("text").attr("class","row-label").attr("x",-6).attr("y",this.x.bandwidth()/2).attr("dy",".32em").attr("text-anchor","end").text((function(t,e){return t[e].source.split("/").slice(-1)}))}},{key:"appendCol",value:function(t){var e=this,n=this.svg.selectAll(".column").data(t);n.exit().remove();var a=n.enter().append("g").attr("class","column").attr("transform",(function(t,n){return"translate(".concat(e.x(n),")rotate(-90)")}));a.append("line").attr("x1",-this.width),a.append("text").attr("class","col-label").attr("x",6).attr("y",this.x.bandwidth()/2).attr("dy","0.32em").attr("text-anchor","start").text((function(t,e){return t[e].target.split("/").slice(-1)}))}},{key:"changeOrder",value:function(t){var e=this;this.x.domain(this.orderings[t]);var n=this.svg.transition().duration(1e3);n.selectAll(".row").delay((function(t,n){return 1*e.x(n)})).attr("transform",(function(t,n){return"translate(0, ".concat(e.x(n),")")})).selectAll(".cell").delay((function(t){return 1*e.x(t.row)})).attr("x",(function(t){return e.x(t.col)})),n.selectAll(".column").delay((function(t,n){return 1*e.x(n)})).attr("transform",(function(t,n){return"translate(".concat(e.x(n),")rotate(-90)")}))}},{key:"updateData",value:function(t,e,a){var r=e[0].map((function(t,n){return e.map((function(t){return t[n]}))})),i=n.getTopMappings(t,r,a),o=i.topMappings,c=i.topFiles,s=n.formatData(c,o);return this.colors=Ot.d(Ot.e).domain([""].concat(Object(dt.a)(c.map((function(t){return t.split("/")[0]}))))),this.orderings={descending:Ot.a(s.length),ascending:Ot.a(s.length).reverse(),directory:Ot.a(s.length).sort((function(t,e){return c[t]<c[e]?-1:c[e]<c[t]?1:0}))},this.x.domain(this.orderings.descending),s}},{key:"renderData",value:function(t,e,n,a){var r=this.updateData(t,e,n);this.x.domain(this.orderings[a]),this.svg.selectAll(".row").remove(),this.svg.selectAll(".column").remove(),this.appendRow(r),this.appendCol(r)}},{key:"render",value:function(){return r.a.createElement("div",{className:"vis-container"},r.a.createElement("div",{className:"vis"},r.a.createElement("svg",{id:"d3-vis"})))}}]),n}(r.a.Component)),Et=Object(c.c)((function(t){var e=t.data,n=t.ordering,a=t.topCount;return{files:e.names,mappings:e.data,ordering:n,topCount:a}}))(bt),wt=n(50),jt=n(520),yt=n(521),Ct=n(522),Tt=n(523),xt=n(524),St=n(259),_t=n(530),Nt=n(525),Dt=n(531),Mt=Object(jt.a)((function(t,e,n){return Object(yt.a)(e,Object($.a)(t,n),Object(Ct.a)(t,n))})),kt=(Object(F.a)(Tt.a,Object(J.a)(Object(xt.a)(Object(F.a)(Q.a,Object(St.a)("data")),Object(F.a)(_t.a,Nt.a,Object($.a)("data")),Object(F.a)(_t.a,Nt.a))),Dt.a,Mt("names","files"),Mt("data","mappings"),Mt("size","sizes")),function(t){return Object(wt.a)(t)}),At=Object(F.a)((function(t){return kt((function(){return u.a.get(t)}))}),Object(wt.c)(Object($.a)("data")),Object(wt.d)(Object($.a)("message"))),It=function(t,e,n,a,r){Object(wt.b)(t)(e)(At("".concat("https://itdepends.herokuapp.com","/crosscut/file?start=").concat(n,"&end=").concat(a,"&url=").concat(r)))},zt=function(t){var e=t.startCommit,n=t.endCommit,i=t.repo,o=t.data,c=t.setData,s=Object(x.e)(),l=Object(a.useState)([window.innerWidth,window.innerHeight]),u=Object(R.a)(l,2),m=u[0],d=u[1];return Object(a.useEffect)((function(){0===i.length?s.push(D.HOME):It((function(t){S.c.error(t),s.push(D.HOME)}),c,e,n,i)}),[e,n,c,i,s]),Object(a.useEffect)((function(){var t=function(){d([window.innerWidth,window.innerHeight])};return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),r.a.createElement(z.a,{spinning:!o.data.length},r.a.createElement(mt,null),r.a.createElement(Et,{width:m[0],height:m[1]}))};zt.defaultProps={data:null};var Rt=zt,Pt=Object(M.a)(["startCommit","endCommit","repo","data"]),Vt={setRepo:k,setData:function(t){return{type:h.SET_DATA,data:t}}},Ut=Object(c.c)(Pt,Vt)(Rt),Ht=(n(411),n(257)),Lt=(n(413),n(246)),Gt=(n(226),n(261)),Bt=(n(416),n(256)),Ft=n(254),Wt=n(255),Jt=n(245),Xt=n.n(Jt),qt=n(532),$t=n(263),Kt=Object(F.a)(Object(xt.a)(Object(qt.a)(["data","commits"]),Object($t.a)(["data","commits"]),(function(){return[]}))),Qt=Object(F.a)((function(t){return kt((function(){return u.a.put(t)}))}),Object(wt.c)(Kt),Object(wt.d)(Object($.a)("message"))),Yt=Object(jt.a)((function(t,e,n){Object(wt.b)(t)(e)(Qt("".concat("https://itdepends.herokuapp.com","/init?url=").concat(n)))})),Zt=function(t){var e=t.className,n=t.align,a=t.children;return r.a.createElement(P.a,{className:e,align:n},r.a.createElement(U.a,{xs:{span:20,offset:2},md:{span:16,offset:4},lg:{span:12,offset:6},xl:{span:10,offset:7},xxl:{span:8,offset:8}},a))};Zt.defaultProps={align:"top"};var te=Zt,ee=(n(497),function(t){var e=t.setRepo,i=t.setCommits,o=t.setStartCommit,c=t.setEndCommit,s=Object(x.e)(),l=Object(a.useState)(!1),u=Object(R.a)(l,2),m=u[0],d=u[1],p=function(t){S.c.error(t),e("")},h=function(t){i(t),o(0),c(Object(X.a)(t)-1),s.push(D.VIS)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(te,{className:"home",align:"middle"},r.a.createElement(Lt.a,{direction:"vertical",size:"large",className:"space"},r.a.createElement(P.a,{justify:"center"},r.a.createElement("div",{className:"iconContainer"},r.a.createElement(L.a,{size:128,color:"#fff"}))),r.a.createElement(P.a,{justify:"center"},r.a.createElement(Bt.a.Title,{className:"title"},"It Depends")),r.a.createElement(P.a,{justify:"center"},r.a.createElement(Gt.a.Search,{className:"repoInput",size:"large",placeholder:"Github Repository",prefix:r.a.createElement(Ft.a,{color:"grey",className:"repoIcon"}),onSearch:function(t){/^(https:\/\/|http:\/\/)?(www.)?github\.com\/.+\/.+/g.test(t)?(Yt(p,h,t),e(t)):S.c.error("Invalid Github URL")},enterButton:"Search"})),r.a.createElement(P.a,{justify:"center",className:"question-container"},r.a.createElement("div",{className:"question",onClick:function(){return d(!m)}},r.a.createElement(Wt.a,{size:"1.5em"}))))),r.a.createElement(Ht.a,{className:"drawer",placement:"bottom",closable:!0,height:"85%",onClose:function(){return d(!1)},visible:m},r.a.createElement(te,{className:"drawer-content"},r.a.createElement(Xt.a,{source:"# About\n\n\n[Backend Repo](https://github.com/jyoo980/it-depends)\n\n\n[Visualization Repo](https://github.com/daviidli/it-depends-vis)\n\n\nDevelopers often encounter trouble traversing the information space of a large software system with extensive revision history. Looking through a list of commits is time-consuming, and fails to convey information in a form which efficiently communicates information about the system. it depends is a visualization which makes it easier for developers and managers to understand the dependencies between entities in a software system across commits.\n\n\n# How to use\nThe visualization is a matrix denoting the probability of changing one file requiring changes to another file, based on previous commits. In the example below, we can see that if we were to change `InterfaceDecl.ts`, then there is a `55.9%` chance that we would need to change `ClassDecl.spec.ts`. Another way of looking at it is, based on all the commits in the selected range, `55.9%` of the commits that included `InterfaceDecl.ts` also included `ClassDecl.spec.ts`.\n\nThe colours of each block represents whether both files are in the same top level directory. When both files are from different directories, the color is black.\n\n\n![example visualization](example.png)\n\n\n## Parameters\n\n### Commits\n\nThe commits dropdown is located in the header and can be used to specify a range of commits to analyse for the visualization.\n\n### Top count\n\nA slider is located in the header to allow for adjusting how much data the visualization shows. By default, the top 20 files are shown.\n\n### Ordering\n\nA dropdown is located in the header to allow for changing the ordering of the items in the visualization. There are three possible values: `descending`, `ascending` and `directory`.",transformImageUri:function(t){return n(510)("./".concat(t))}}))))}),ne={setRepo:k,setCommits:function(t){return{type:h.SET_COMMITS,commits:t}},setStartCommit:A,setEndCommit:I},ae=Object(c.c)(null,ne)(ee),re=function(){return r.a.createElement(N,null,r.a.createElement(x.c,null,r.a.createElement(x.a,{exact:!0,path:D.HOME,component:ae}),r.a.createElement(x.a,{path:D.VIS,component:Ut})))},ie=T();n(512);u.a.defaults.headers.post["Access-Control-Allow-Origin"]="*",o.a.render(r.a.createElement(c.a,{store:ie},r.a.createElement(s.a,{history:C},r.a.createElement(re,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[287,1,2]]]);
//# sourceMappingURL=main.08659900.chunk.js.map