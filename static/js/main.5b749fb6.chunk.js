(this["webpackJsonpit-depends-vis"]=this["webpackJsonpit-depends-vis"]||[]).push([[0],{102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(8),s=n.n(i),o=(n(93),n(27)),c=n(12),l=n(136),u=n(145),d=n(138),h=n(137),m=n(62),p=n.n(m),g=n(141),f=n(143),b=n(130),v=n(139),y=n(3),O=(n(94),function(e){var t=e.selectedValue,n=e.label,i=e.disabled,s=e.setSelectedValue,o=e.values,l=e.className,u=Object(r.useState)(0),d=Object(c.a)(u,2),h=d[0],m=d[1],p=Object(r.useRef)(null);return Object(r.useEffect)((function(){m(p.current.offsetWidth)}),[]),a.a.createElement(b.a,{variant:"outlined",className:Object(y.a)("dropdown",l),disabled:i},a.a.createElement(g.a,{ref:p,id:n,className:"label",margin:"dense"},n),a.a.createElement(v.a,{className:"select",value:t,onChange:function(e){return s(e.target.value)},margin:"dense",labelId:n,labelWidth:h},o.map((function(e,t){return a.a.createElement(f.a,{key:e+t,value:e},e)}))))}),k=function(e){var t,n=e.label,r=e.selectedCommit,i=e.showCommitsAfter,s=e.setSelectedCommit,o=e.commits,c=o.indexOf(i);return t=c<0?o:o.slice(c+1,o.length),a.a.createElement(O,{selectedValue:r,label:n,disabled:!t.length,setSelectedValue:s,values:t})},E=a.a.createContext([]),w=function(e){var t=Object(r.useState)(!1),n=Object(c.a)(t,2),i=n[0],s=n[1];return a.a.createElement(E.Provider,{value:[i,s]},e.children)},j=a.a.createContext(null),x=a.a.createContext({});n(99);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(n,!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D,N=function(){var e=Object(r.useState)(""),t=Object(c.a)(e,2),n=t[0],i=t[1],s=Object(r.useContext)(E)[1],o=Object(r.useContext)(j),m=Object(c.a)(o,2),g=m[0],f=m[1],b=Object(r.useContext)(x),v=Object(c.a)(b,1)[0],y=function(){f((function(e){return P({},e,{repository:n})}))};return a.a.createElement("div",{className:"headerContainer"},a.a.createElement(l.a,{container:!0,className:"repoContainer",spacing:1,justify:"space-evenly"},a.a.createElement(l.a,{item:!0,xs:12},a.a.createElement("span",{className:"heading"},"IT DEPENDS"),a.a.createElement(h.a,{className:"help","aria-label":"help",onClick:function(){s(!0)}},a.a.createElement(p.a,null))),a.a.createElement(l.a,{item:!0,xs:10,sm:11,md:4},a.a.createElement(u.a,{label:"Repository",type:"search",variant:"outlined",margin:"dense",fullWidth:!0,value:n,onChange:function(e){return i(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&y()}})),a.a.createElement(l.a,{item:!0,xs:2,sm:1,md:1},a.a.createElement(d.a,{id:"repoSend",variant:"contained",color:"secondary",onClick:function(){return y()}},">")),a.a.createElement(l.a,{item:!0,xs:12,sm:12,md:3}),a.a.createElement(l.a,{item:!0,xs:6,sm:6,md:2},a.a.createElement(k,{label:"Start Commit",selectedCommit:g.startCommit,showCommitsAfter:"",setSelectedCommit:function(e){f((function(t){return P({},t,{startCommit:e})}))},commits:v.commits})),a.a.createElement(l.a,{item:!0,xs:6,sm:6,md:2},a.a.createElement(k,{label:"End Commit",selectedCommit:g.endCommit,showCommitsAfter:g.startCommit,setSelectedCommit:function(e){f((function(t){return P({},t,{endCommit:e})}))},commits:v.commits}))))},S=n(140),L=(n(102),function(){var e=Object(r.useContext)(E),t=Object(c.a)(e,2),n=t[0],i=t[1],s={top:window.innerHeight/2,left:window.innerWidth/2,width:window.innerWidth>550?480:"85%"};return a.a.createElement(S.a,{"aria-labelledby":"help",open:n,onClose:function(){return i(!1)}},a.a.createElement("div",{className:"helpModal",style:s},a.a.createElement("span",{className:"helpHeader"},"Help"),a.a.createElement("div",{className:"helpDescription"},"This tool enables developers to more easily visualize dependencies between entities in a software system (classes, files, etc...) which cut across commit history."),a.a.createElement(d.a,{className:"closeButton",variant:"contained",color:"secondary",onClick:function(){return i(!1)}},"Close")))}),A=n(142);!function(e){e.FILES="Files",e.CLASSES="Classes",e.FUNCTIONS="Functions"}(D||(D={}));n(103);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(){var e=Object(r.useContext)(j),t=Object(c.a)(e,2),n=t[0],i=t[1],s=Object(r.useContext)(x),o=Object(c.a)(s,2),u=o[0],d=o[1],h=Object.values(D),m=window.innerWidth>550;return a.a.createElement(l.a,{className:"footer",container:!0,spacing:0,justify:"space-between"},a.a.createElement(l.a,{item:!0,xs:12,sm:5},a.a.createElement(O,{className:Object(y.a)({wide:m}),selectedValue:n.granularity,label:"Granularity",disabled:!1,setSelectedValue:function(e){i((function(t){return W({},t,{granularity:e})}))},values:h})),a.a.createElement(l.a,{item:!0,xs:12,sm:1}),a.a.createElement(l.a,{item:!0,xs:12,sm:3,className:"sliderContainer"},a.a.createElement("div",{className:"sliderLabel"},"Percentage Range"),a.a.createElement(A.a,{className:Object(y.a)("slider",{wide:m}),value:[u.percentageLow,u.percentageHigh],onChange:function(e,t){var n=t;d((function(e){return W({},e,{percentageLow:n[0],percentageHigh:n[1]})}))},valueLabelDisplay:"auto","aria-labelledby":"range-slider",getAriaValueText:function(){return u.percentageLow+"-"+u.percentageHigh}})))},H=n(44),z=n(41),R=n(42),F=n(64),T=n(63),B=n(65),V=n(14),q=function(e){function t(e){var n;return Object(z.a)(this,t),(n=Object(F.a)(this,Object(T.a)(t).call(this,e))).id=void 0,n.graphData=void 0,n.nodes=[],n.edges=[],n.persistedNodes=[],n.persistedEdges=[],n.link=void 0,n.persistedLink=void 0,n.node=void 0,n.label=void 0,n.percentages=void 0,n.simulation=void 0,n.g=void 0,n.id="visualization",n.graphData=n.props.graphData,n.nodes=n.graphData.getNodes(),n.state={mounted:!1},n}return Object(B.a)(t,e),Object(R.a)(t,[{key:"shouldComponentUpdate",value:function(e){return e.graphData!==this.props.graphData||(this.state.mounted&&this.restart(),!1)}},{key:"componentDidUpdate",value:function(){this.graphData=this.props.graphData,this.nodes=this.graphData.getNodes(),this.edges=[],this.persistedEdges=[],this.state.mounted&&this.restart()}},{key:"componentDidMount",value:function(){this.setState({mounted:!0}),this.startD3Graph()}},{key:"render",value:function(){return this.state.mounted&&this.restart(),a.a.createElement("svg",{id:this.id})}},{key:"startD3Graph",value:function(){var e=window.innerWidth,t=window.innerHeight,n=V.h("#"+this.id).attr("width",e).attr("height",t),r=n.append("g");n.call(V.i().extent([[0,0],[e,t]]).scaleExtent([.25,4]).on("zoom",(function(){r.attr("transform",V.b.transform)}))),this.g=r.append("g").attr("transform","translate("+e/2+","+.4*t+")"),this.link=this.g.append("g").attr("stroke","#000").attr("stroke-width",1).selectAll(".link"),this.persistedLink=this.g.append("g").attr("stroke","#000").attr("stroke-width",1).selectAll(".pLink"),this.node=this.g.append("g").attr("stroke","#000").attr("stroke-width",4).selectAll(".node"),this.percentages=this.g.append("text").attr("dy",-5).selectAll(".percentages"),this.label=this.g.append("g").selectAll(".label"),this.g.append("defs").selectAll("marker").data(["#000","#e74c3c"]).enter().append("marker").attr("id",(function(e){return e})).attr("viewBox","0 -5 10 10").attr("refX",0).attr("refY",0).attr("markerWidth",4).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("fill",(function(e){return e})),this.simulation=V.e(this.nodes).force("charge",V.d().strength(-1e3)).force("link",V.c(this.persistedEdges).distance(400).strength(.05)).force("x",V.f().strength(.1)).force("y",V.g().strength(.1)).alphaTarget(1).on("tick",this.tick.bind(this)),this.restart()}},{key:"tick",value:function(){this.node.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})),this.link.attr("d",this.calculateCurvedPath).attr("d",this.calculateArrowOffset),this.persistedLink.attr("d",this.calculateCurvedPath).attr("d",this.calculateArrowOffset),this.label.attr("transform",(function(e){return"translate("+e.x+","+e.y+")"}))}},{key:"restart",value:function(){var e=this,t=this.edges.filter(this.isWithinRange.bind(this)),n=this.persistedEdges.filter(this.isWithinRange.bind(this));this.node=this.node.data(this.nodes,(function(e){return e.name})),this.node.exit().remove(),this.node=this.node.enter().append("circle").on("mouseover",this.onMouseOver.bind(this)).on("mouseout",this.onMouseOut.bind(this)).on("click",this.onClick.bind(this)).attr("id",(function(e){return e.id})).attr("r",this.getRadius).attr("fill","#2c3e50").call(this.drag(this.simulation)).merge(this.node),this.link=this.link.data(t,this.getEdgeId),this.link.exit().remove(),this.link=this.link.enter().append("path").attr("stroke","#e74c3c").attr("stroke-width",this.getEdgeWeight).attr("fill","none").attr("id",this.getEdgeId).attr("marker-end",(function(){return"url(##e74c3c)"})).merge(this.link),this.persistedLink=this.persistedLink.data(n,this.getEdgeId),this.persistedLink.exit().remove(),this.persistedLink=this.persistedLink.enter().append("path").attr("stroke","#000").attr("stroke-width",this.getEdgeWeight).attr("fill","none").attr("id",this.getEdgeId).attr("marker-end",(function(){return"url(##000)"})).merge(this.persistedLink),this.percentages=this.percentages.data([].concat(Object(H.a)(t),Object(H.a)(n)),this.getEdgeId),this.percentages.exit().remove(),this.percentages=this.percentages.enter().append("textPath").attr("xlink:href",(function(t){return"#"+e.getEdgeId(t)})).attr("startOffset","50%").text((function(e){return 100*e.weight+"%"})).merge(this.percentages),this.label=this.label.data(this.nodes,(function(e){return e.id})),this.label.exit().remove(),this.label=this.label.enter().append("text").attr("x",(function(e){return-1*e.name.length/4+1+"em"})).attr("y",(function(t){return e.getRadius(t)+20})).text((function(e){return e.name})).merge(this.label),this.simulation.nodes(this.nodes),this.simulation.force("link").links(n),this.simulation.alpha(1).restart()}},{key:"onMouseOver",value:function(e){this.g.select("#"+e.id).attr("stroke","#aaa").attr("stroke-width",4),this.edges=this.graphData.getEdgesFrom(e),this.restart()}},{key:"onMouseOut",value:function(e){this.g.select("#"+e.id).attr("stroke",null).attr("stroke-width",null),this.edges=[],this.restart()}},{key:"onClick",value:function(e){var t,n=this.persistedNodes.indexOf(e),r=this.graphData.getEdgesFrom(e);n<0?(this.persistedNodes.push(e),(t=this.persistedEdges).push.apply(t,Object(H.a)(r))):(this.persistedNodes.splice(n,1),this.persistedEdges=this.persistedEdges.filter((function(e){return r.indexOf(e)<0})));this.restart()}},{key:"drag",value:function(e){return V.a().on("start",(function(t){V.b.active||e.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y})).on("drag",(function(e){e.fx=V.b.x,e.fy=V.b.y})).on("end",(function(t){V.b.active||e.alphaTarget(0),t.fx=null,t.fy=null}))}},{key:"calculateCurvedPath",value:function(e){var t=e.target.x-e.source.x,n=e.target.y-e.source.y,r=Math.sqrt(t*t+n*n);return"M"+e.source.x+","+e.source.y+"A"+r+","+r+" 0 0,1 "+e.target.x+","+e.target.y}},{key:"calculateArrowOffset",value:function(e){var t=this.getTotalLength(),n=4*Math.sqrt(10*e.weight),r=Math.sqrt(2*Math.pow(n,2)),a=10*e.target.size+r,i=this.getPointAtLength(t-a),s=i.x-e.source.x,o=i.y-e.source.y,c=Math.sqrt(s*s+o*o);return"M"+e.source.x+","+e.source.y+"A"+c+","+c+" 0 0,1 "+i.x+","+i.y}},{key:"isWithinRange",value:function(e){return e.weight>=this.props.percentageLow&&e.weight<=this.props.percentageHigh}},{key:"getRadius",value:function(e){return 10*e.size}},{key:"getEdgeId",value:function(e){return e.source.id+"-"+e.target.id}},{key:"getEdgeWeight",value:function(e){return 6*Math.pow(e.weight,1.5)}}]),t}(a.a.Component),G=function(){function e(t){Object(z.a)(this,e),this.nodes=void 0,this.edges=void 0,this.data=void 0,this.data=t.data,this.nodes=this.parseNodes(t.names,t.size),this.edges=this.parseEdges(t.data)}return Object(R.a)(e,[{key:"getNodes",value:function(){return this.nodes}},{key:"getEdges",value:function(){return this.edges}},{key:"getEdgesFrom",value:function(e){return this.edges.filter((function(t){return t.source===e}))}},{key:"parseNodes",value:function(e,t){var n=[];if(e.length!==t.length)throw new Error("bad response");for(var r=0;r<e.length;r++)n.push({id:this.cleanName(e[r]),name:e[r],size:t[r],x:0,y:0});return n}},{key:"parseEdges",value:function(e){for(var t=[],n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++)n!==r&&0!==e[n][r]&&t.push({source:this.nodes[r],target:this.nodes[n],weight:Math.round(100*e[n][r])/100});return t}},{key:"cleanName",value:function(e){return e.replace(" ","").replace("(","").replace(")","")}}]),e}();function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var J=function(){var e=Object(r.useState)({repository:"",startCommit:"",endCommit:"",granularity:D.FILES}),t=Object(c.a)(e,2),n=t[0],i=t[1],s=Object(r.useState)({response:{names:[],size:[],data:[]},percentageLow:0,percentageHigh:100,commits:[]}),l=Object(c.a)(s,2),u=l[0],d=l[1],h=Object(r.useState)(new G({names:[],size:[],data:[]})),m=Object(c.a)(h,2),p=m[0],g=m[1];return Object(r.useEffect)((function(){if(0!==n.repository.length){var e={names:["constructor (A)","main (A)","receiveInput (A)","constructor (B)","doSomething (B)","doSomethingElse (B)","constructor (C1)","foo (C1)","constructor (C2)","barbar (C2)"],size:[1,1,6,2,4,1,1,2,1,1],data:[[1,1,1,1,1,0,0,0,0,0],[1,1,1,1,1,0,0,0,0,0],[.166666667,.166666667,1,.333333333,.5,.166666667,.166666667,.333333333,.166666667,0],[.5,.5,1,1,.5,.5,0,0,0,0],[.25,.25,.75,.25,1,0,0,.25,0,0],[0,0,1,1,0,1,0,0,0,0],[0,0,1,0,0,0,1,1,1,0],[0,0,1,0,.5,0,.5,1,.5,0],[0,0,1,0,0,0,1,1,1,0],[0,0,0,0,0,0,0,0,0,1]]},t=["commit #1","commit #2","commit #3","commit #4","commit #5","commit #6","commit #7","commit #8","commit #9","commit #10"];d((function(n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(n,!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,{response:e,commits:t})}))}}),[n,d]),Object(r.useEffect)((function(){g(new G(u.response))}),[u.response,g]),a.a.createElement(x.Provider,{value:[u,d]},a.a.createElement(j.Provider,{value:[n,i]},a.a.createElement(w,null,a.a.createElement(L,null),a.a.createElement(N,null)),a.a.createElement(q,{graphData:p,percentageLow:u.percentageLow/100,percentageHigh:u.percentageHigh/100}),a.a.createElement(I,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},88:function(e,t,n){e.exports=n(104)},93:function(e,t,n){},94:function(e,t,n){},99:function(e,t,n){}},[[88,1,2]]]);
//# sourceMappingURL=main.5b749fb6.chunk.js.map