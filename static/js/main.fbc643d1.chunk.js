(this["webpackJsonpit-depends-vis"]=this["webpackJsonpit-depends-vis"]||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(8),s=a.n(i),o=(a(93),a(60)),l=a(14),c=a(136),d=a(141),u=a(138),h=a(137),m=a(62),f=a.n(m),p=a(145),g=a(143),v=a(130),b=a(139),k=a(3),y=(a(94),function(e){var t=e.selectedValue,a=e.label,i=e.disabled,s=e.setSelectedValue,o=e.values,c=e.className,d=Object(n.useState)(0),u=Object(l.a)(d,2),h=u[0],m=u[1],f=Object(n.useRef)(null);return Object(n.useEffect)((function(){m(f.current.offsetWidth)}),[]),r.a.createElement(v.a,{variant:"outlined",className:Object(k.a)("dropdown",c),disabled:i},r.a.createElement(p.a,{ref:f,id:a,className:"label",margin:"dense"},a),r.a.createElement(b.a,{className:"select",value:t,onChange:function(e){return s(e.target.value)},margin:"dense",labelId:a,labelWidth:h},o.map((function(e,t){return r.a.createElement(g.a,{key:e+t,value:e},e)}))))}),E=function(e){var t,a=e.label,n=e.selectedCommit,i=e.showCommitsAfter,s=e.setSelectedCommit,o=e.commits,l=o.indexOf(i);return t=l<0?o:o.slice(l+1,o.length),r.a.createElement(y,{selectedValue:n,label:a,disabled:!t.length,setSelectedValue:s,values:t})},w=r.a.createContext([]),O=function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),i=a[0],s=a[1];return r.a.createElement(w.Provider,{value:[i,s]},e.children)};a(99);function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(a,!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var N=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],i=t[1],s=Object(n.useState)([]),o=Object(l.a)(s,2),m=o[0],p=o[1],g=Object(n.useState)({start:"",end:""}),v=Object(l.a)(g,2),b=v[0],k=v[1],y=Object(n.useContext)(w)[1],O=function(){console.log(a),p(["commit #1","commit #2","commit #3","commit #4","commit #5","commit #6","commit #7","commit #8","commit #9","commit #10"])};return r.a.createElement("div",{className:"headerContainer"},r.a.createElement(c.a,{container:!0,className:"repoContainer",spacing:1,justify:"space-evenly"},r.a.createElement(c.a,{item:!0,xs:12},r.a.createElement("span",{className:"heading"},"IT DEPENDS"),r.a.createElement(h.a,{className:"help","aria-label":"help",onClick:function(){y(!0)}},r.a.createElement(f.a,null))),r.a.createElement(c.a,{item:!0,xs:10,sm:11,md:4},r.a.createElement(d.a,{label:"Repository",type:"search",variant:"outlined",margin:"dense",fullWidth:!0,value:a,onChange:function(e){return i(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&O()}})),r.a.createElement(c.a,{item:!0,xs:2,sm:1,md:1},r.a.createElement(u.a,{id:"repoSend",variant:"contained",color:"secondary",onClick:function(){return O()}},">")),r.a.createElement(c.a,{item:!0,xs:12,sm:12,md:3}),r.a.createElement(c.a,{item:!0,xs:6,sm:6,md:2},r.a.createElement(E,{label:"Start Commit",selectedCommit:b.start,showCommitsAfter:"",setSelectedCommit:function(e){k((function(t){return j({},t,{start:e})}))},commits:m})),r.a.createElement(c.a,{item:!0,xs:6,sm:6,md:2},r.a.createElement(E,{label:"End Commit",selectedCommit:b.end,showCommitsAfter:b.start,setSelectedCommit:function(e){k((function(t){return j({},t,{end:e})}))},commits:m}))))},C=a(140),S=(a(102),function(){var e=Object(n.useContext)(w),t=Object(l.a)(e,2),a=t[0],i=t[1],s={top:window.innerHeight/2,left:window.innerWidth/2,width:window.innerWidth>550?480:"85%"};return r.a.createElement(C.a,{"aria-labelledby":"help",open:a,onClose:function(){return i(!1)}},r.a.createElement("div",{className:"helpModal",style:s},r.a.createElement("span",{className:"helpHeader"},"Help"),r.a.createElement("div",{className:"helpDescription"},"This tool enables developers to more easily visualize dependencies between entities in a software system (classes, files, etc...) which cut across commit history."),r.a.createElement(u.a,{className:"closeButton",variant:"contained",color:"secondary",onClick:function(){return i(!1)}},"Close")))}),A=a(142),L=(a(103),function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],i=t[1],s=Object(n.useState)([0,100]),o=Object(l.a)(s,2),d=o[0],u=o[1],h=window.innerWidth>550;return r.a.createElement(c.a,{className:"footer",container:!0,spacing:0,justify:"space-between"},r.a.createElement(c.a,{item:!0,xs:12,sm:5},r.a.createElement(y,{className:Object(k.a)({wide:h}),selectedValue:a,label:"Granularity",disabled:!1,setSelectedValue:i,values:["Files","Classes","Functions"]})),r.a.createElement(c.a,{item:!0,xs:12,sm:1}),r.a.createElement(c.a,{item:!0,xs:12,sm:3,className:"sliderContainer"},r.a.createElement("div",{className:"sliderLabel"},"Percentage Range"),r.a.createElement(A.a,{className:Object(k.a)("slider",{wide:h}),value:d,onChange:function(e,t){return u(t)},valueLabelDisplay:"auto","aria-labelledby":"range-slider",getAriaValueText:function(){return d[0]+"-"+d[1]}})))}),M=a(43),D=a(40),P=a(41),W=a(64),z=a(63),B=a(65),T=a(13),V=function(){function e(t){Object(D.a)(this,e),this.nodes=void 0,this.edges=void 0,this.data=void 0,this.data=t.data,this.nodes=this.parseNodes(t.names,t.size),this.edges=this.parseEdges(t.data)}return Object(P.a)(e,[{key:"getNodes",value:function(){return this.nodes}},{key:"getEdges",value:function(){return this.edges}},{key:"getEdgesFrom",value:function(e){return this.edges.filter((function(t){return t.source===e}))}},{key:"parseNodes",value:function(e,t){var a=[];if(e.length!==t.length)throw new Error("bad response");for(var n=0;n<e.length;n++)a.push({id:this.cleanName(e[n]),name:e[n],size:t[n],x:0,y:0});return a}},{key:"parseEdges",value:function(e){for(var t=[],a=0;a<e.length;a++)for(var n=0;n<e[a].length;n++)a!==n&&0!==e[a][n]&&t.push({source:this.nodes[a],target:this.nodes[n],weight:e[a][n]});return t}},{key:"cleanName",value:function(e){return e.replace(" ","").replace("(","").replace(")","")}}]),e}(),q=function(e){function t(e){var a;Object(D.a)(this,t),(a=Object(W.a)(this,Object(z.a)(t).call(this,e))).id=void 0,a.graphData=void 0,a.nodes=void 0,a.edges=void 0,a.persistedNodes=void 0,a.persistedEdges=void 0,a.labelNodes=void 0,a.hoveredNode=null,a.link=void 0,a.persistedLink=void 0,a.node=void 0,a.label=void 0,a.simulation=void 0,a.g=void 0,a.id="visualization";return a.graphData=new V({names:["constructor (A)","main (A)","receiveInput (A)","constructor (B)","doSomething (B)","doSomethingElse (B)","constructor (C1)","foo (C1)","constructor (C2)","barbar (C2)"],size:[1,1,6,2,4,1,1,2,1,1],data:[[1,1,.166666667,.5,.25,0,0,0,0,0],[1,1,.166666667,.5,.25,0,0,0,0,0],[1,1,1,1,.75,1,1,1,1,0],[1,1,.333333333,1,.25,1,0,0,0,0],[1,1,.5,.5,1,0,0,.5,0,0],[0,0,.166666667,.5,0,1,0,0,0,0],[0,0,.166666667,0,0,0,1,.5,1,0],[0,0,.333333333,0,.25,0,1,1,1,0],[0,0,.166666667,0,0,0,1,.5,1,0],[0,0,0,0,0,0,0,0,0,1]]}),a.nodes=a.graphData.getNodes(),a.edges=[],a.persistedNodes=[],a.persistedEdges=[],a.labelNodes=new Set,a}return Object(B.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){var e=window.innerWidth,t=window.innerHeight,a=T.h("#"+this.id).attr("width",e).attr("height",t),n=a.append("g");a.call(T.i().extent([[0,0],[e,t]]).scaleExtent([.25,4]).on("zoom",(function(){n.attr("transform",T.b.transform)}))),this.g=n.append("g").attr("transform","translate("+e/2+","+t/2+")"),this.link=this.g.append("g").attr("stroke","#000").attr("stroke-width",1.5).selectAll(".link"),this.persistedLink=this.g.append("g").attr("stroke","#000").attr("stroke-width",1.5).selectAll(".pLink"),this.node=this.g.append("g").attr("stroke","#fff").attr("stroke-width",1.5).selectAll(".node"),this.label=this.g.append("g").selectAll(".label"),this.g.append("defs").selectAll("marker").data(["#000","#aaa"]).enter().append("marker").attr("id",(function(e){return e})).attr("viewBox","0 -5 10 10").attr("refX",0).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("fill",(function(e){return e})),this.simulation=T.e(this.nodes).force("charge",T.d().strength(-1e3)).force("link",T.c(this.edges).distance(200)).force("x",T.f()).force("y",T.g()).alphaTarget(1).on("tick",this.tick.bind(this)),this.restart()}},{key:"render",value:function(){return r.a.createElement("svg",{id:this.id})}},{key:"tick",value:function(){this.node.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})),this.link.attr("d",this.calculateCurvedPath).attr("d",this.calculateArrowOffset),this.persistedLink.attr("d",this.calculateCurvedPath).attr("d",this.calculateArrowOffset),this.label.attr("transform",(function(e){return"translate("+e.x+","+e.y+")"}))}},{key:"restart",value:function(){this.labelNodes=this.getLabelNodes(),this.node=this.node.data(this.nodes,(function(e){return e.name})),this.node.exit().remove(),this.node=this.node.enter().append("circle").on("mouseover",this.onMouseOver.bind(this)).on("mouseout",this.onMouseOut.bind(this)).on("click",this.onClick.bind(this)).attr("id",(function(e){return e.id})).attr("r",(function(e){return 10*e.size})).attr("fill","#fedcba").call(this.drag(this.simulation)).merge(this.node),this.link=this.link.data(this.edges,(function(e){return e.source.name+"-"+e.target.name})),this.link.exit().remove(),this.link=this.link.enter().append("path").attr("stroke","#aaa").attr("stroke-width",(function(e){return 4*Math.sqrt(e.weight)})).attr("fill","none").attr("marker-end",(function(){return"url(##aaa)"})).merge(this.link),this.persistedLink=this.persistedLink.data(this.persistedEdges,(function(e){return e.source.name+"-"+e.target.name})),this.persistedLink.exit().remove(),this.persistedLink=this.persistedLink.enter().append("path").attr("stroke","#000").attr("stroke-width",(function(e){return 4*Math.sqrt(e.weight)})).attr("fill","none").attr("marker-end",(function(){return"url(##000)"})).merge(this.persistedLink),this.label=this.label.data(Array.from(this.labelNodes),(function(e){return e.id})),this.label.exit().remove(),this.label=this.label.enter().append("text").attr("x",(function(e){return-1*e.name.length/4+1+"em"})).attr("y",(function(e){return 10*e.size+20})).text((function(e){return e.name})).merge(this.label),this.simulation.nodes(this.nodes),this.simulation.alpha(1).restart()}},{key:"onMouseOver",value:function(e){this.g.select("#"+e.id).attr("stroke","#aaa").attr("stroke-width",4),this.edges=this.graphData.getEdgesFrom(e),this.hoveredNode=e,this.restart()}},{key:"onMouseOut",value:function(e){this.g.select("#"+e.id).attr("stroke",null).attr("stroke-width",null),this.edges=[],this.hoveredNode=null,this.restart()}},{key:"onClick",value:function(e){var t,a=this.persistedNodes.indexOf(e),n=this.graphData.getEdgesFrom(e);a<0?(this.persistedNodes.push(e),(t=this.persistedEdges).push.apply(t,Object(M.a)(n))):(this.persistedNodes.splice(a,1),this.persistedEdges=this.persistedEdges.filter((function(e){return n.indexOf(e)<0})));this.restart()}},{key:"drag",value:function(e){return T.a().on("start",(function(t){T.b.active||e.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y})).on("drag",(function(e){e.fx=T.b.x,e.fy=T.b.y})).on("end",(function(t){T.b.active||e.alphaTarget(0),t.fx=null,t.fy=null}))}},{key:"calculateCurvedPath",value:function(e){var t=e.target.x-e.source.x,a=e.target.y-e.source.y,n=Math.sqrt(t*t+a*a);return"M"+e.source.x+","+e.source.y+"A"+n+","+n+" 0 0,1 "+e.target.x+","+e.target.y}},{key:"calculateArrowOffset",value:function(e){var t=this.getTotalLength(),a=5*Math.sqrt(10*e.weight),n=Math.sqrt(2*Math.pow(a,2)),r=10*e.target.size+n,i=this.getPointAtLength(t-r),s=i.x-e.source.x,o=i.y-e.source.y,l=Math.sqrt(s*s+o*o);return"M"+e.source.x+","+e.source.y+"A"+l+","+l+" 0 0,1 "+i.x+","+i.y}},{key:"getLabelNodes",value:function(){var e=new Set;return null!==this.hoveredNode&&e.add(this.hoveredNode),[].concat(Object(M.a)(this.edges),Object(M.a)(this.persistedEdges)).forEach((function(t){e.add(t.source),e.add(t.target)})),e}}]),t}(r.a.Component),F=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(O,null,r.a.createElement(S,null),r.a.createElement(N,null)),r.a.createElement(q,null),r.a.createElement(L,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},88:function(e,t,a){e.exports=a(104)},93:function(e,t,a){},94:function(e,t,a){},99:function(e,t,a){}},[[88,1,2]]]);
//# sourceMappingURL=main.fbc643d1.chunk.js.map